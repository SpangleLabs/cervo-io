<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
Animals list:
<ul id="animals"></ul>
</body>

<script>
    function load_category(id) {
        var categoryLiId = "category-"+id;
        $.get("http://localhost:3000/categories/"+id, function(data) {
            var listElement = $("#"+categoryLiId);
            if(!listElement.has("ul").length) {
                console.log("hello");
                listElement.append("<ul></ul>");
                $.each(data[0].sub_categories, function (index, itemData) {
                    var subcategoryId = itemData.category_id;
                    var subcategoryName = itemData.name;
                    var subcategoryLiId = "category-" + subcategoryId;
                    listElement.find("ul").append("<li id='" + subcategoryLiId + "'>" +
                        "<span onclick='load_category(" + subcategoryId + ")'>" + subcategoryName + "</span>" +
                        "</li>");
                })
            } else if(!listElement.find("ul").is(":visible")) {
                listElement.find("ul").show();
            } else {
                listElement.find("ul").hide();
            }
        })
    }

    $(document).ready(function() {
        $.get("http://localhost:3000/categories/", function(data) {
            $.each(data, function(index, itemData) {
                var categoryId = itemData.category_id;
                var name = itemData.name;
                var categoryLiId = "category-"+categoryId;
                $("#animals").append("<li id='"+categoryLiId+"'>" +
                    "<span onclick='load_category("+categoryId+")'>"+name+"</span>" +
                    "</li>");
            });
        });
    });
</script>
</html>